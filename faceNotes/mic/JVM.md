



## 请介绍类加载过程，什么是双亲委派？

资料来源：[请介绍类加载过程，什么是双亲委派？](https://www.toutiao.com/video/7085288549322326565/)

Hi， 大家好。
今天我们来分享一道关于 Java 类加载方面的面试题。 在国内的一二线互联网公司面试的时候， 面试官通常是使用这方面的问题来暖场， 但往往造成的是冷场~
比如， 什么是双亲委派？ 什么是类加载？ new String()生成了几个对象等等。
双亲委派的英文是 parent delegation model， 我认为从真正的实现逻辑来看， 正
确的翻译应该是父委托模型。
不管它叫什么， 我们先来看看遇到这个问题应该怎么回答  

## 普通人的回答
## 高手的回答
关于这个问题， 需要从几个方面来回答。
首先， 我简单说一下类的加载机制， 就是我们自己写的 java 源文件到最终运行，
必须要经过编译和类加载两个阶段。
编译的过程就是把.java 文件编译成.class 文件。
类加载的过程， 就是把 class 文件装载到 JVM 内存中， 装载完成以后就会得到
一个 Class 对象， 我们就可以使用 new 关键字来实例化这个对象。  

![image-20231225153416720](img/image-20231225153416720.png)

而类的加载过程， 需要涉及到类加载器。
JVM 在运行的时候， 会产生 3 个类加载器， 这三个类加载器组成了一个层级关系每个类加载器分别去加载不同作用范围的 jar 包， 比如
Bootstrap ClassLoader ， 主 要 是 负 责 Java 核 心 类 库 的 加 载 ， 也 就是%{JDK_HOME}\lib 下的 rt.jar、 resources.jar 等Extension ClassLoader， 主要负责%{JDK_HOME}\lib\ext目录下的jar包和class文件

Application ClassLoader， 主要负责当前应用里面的 classpath 下的所有 jar 包和类文件

除了系统自己提供的类加载器以外， 还可以通过 ClassLoader 类实现自定义加载器， 去满足一些特殊场景的需求  

![image-20231225153507579](img/image-20231225153507579.png)

所谓的父委托模型， 就是按照类加载器的层级关系， 逐层进行委派。
比如当需要加载一个 class 文件的时候， 首先会把这个 class 的查询和加载委派
给父加载器去执行， 如果父加载器都无法加载， 再尝试自己来加载这个 class。  

![image-20231225153605476](img/image-20231225153605476.png)

这样设计的好处， 我认为有几个。
安全性， 因为这种层级关系实际上代表的是一种优先级， 也就是所有的类的加载，
优先给 Bootstrap ClassLoader。 那对于核心类库中的类， 就没办法去破坏， 比
如自己写一个 java.lang.String， 最终还是会交给启动类加载器。 再加上每个类
加载器的作用范围， 那么自己写的 java.lang.String 就没办法去覆盖类库中类。
我认为这种层级关系的设计， 可以避免重复加载导致程序混乱的问题， 因为如果
父加载器已经加载过了， 那么子类就没必要去加载了。
以上就是我对这个问题的理解。  

### 面试点评

JVM  虚拟机一定面试必问的领域， 因为我们自己写的程序运行在 JVM 上， 一旦出现问题， 你不理解， 就无法排查。
就像一个修汽车的工人， 他不知道汽车的工作原理， 不懂发动机， 那他是无法做好这份工作的。
好的， 本期的普通人 VS 高手面试系列的视频就到这里结束了， 喜欢的朋友记得点赞和收藏  

## 谈谈你对JVM的理解

资料来源：[谈谈你对JVM的理解](https://www.toutiao.com/video/7039278036189086215/)






## JVM如何判断一个对象可以被回收？

资料来源：[JVM如何判断一个对象可以被回收？](https://www.toutiao.com/video/7094513500789473800/)


## JVM分代年龄为什么是15次

资料来源：[JVM分代年龄为什么是15次](https://www.toutiao.com/video/7108971301649416734/)


## 请说一下对象的创建过程？看看高手是如何搞定面试官

资料来源：[请说一下对象的创建过程？看看高手是如何搞定面试官](https://www.toutiao.com/video/7080841126466290206/?from_scene=all)



