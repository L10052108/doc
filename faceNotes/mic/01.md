## 跟着mic 学架构
### @Conditional注解有什么用

~~~~
condition注解的一个作用为bean的装载做一个条件判断，只有在满足条件的情况下。spring才会把bean装载到IOC容器里面。而这个条件是我们可以自定义去完成的。我们可以实现condition这个接口，并且重写里面的matches这个方法，去实现自定义的逻辑。所以@condition这个注解，增加了bean的装配的灵活性。在springboot里面对@condition注解做了更进一步的扩展，比如增加了@conditionalOnClass,@conditionOnBean等这样的注解，使得我们在使用的过程中。不再需要些那些条件的逻辑判断。而是可以直接根据数据本身的语义去完成对应的条件的一个装配
~~~~

### 存储MD5的值应该用VARCHAR还是CHAR？
~~~~
我认为应该是用char类型，char类型是一个固定长度的字符串。varchar是一个可变长度的字符串。而md5算法，它所产生的这个数字，他是一个固定长度的。不管数据怎么修改，长度是不变的。这个点呢非常符合char类型的一个特征。另外由于规定长度的，所以在数据变更的时候。不需要进行调整存储空间的一个大小，在效率上会比varchar要更好一些。
~~~~

###  并行和并发有什么区别？
~~~~
并行和并发是Java并发编程里面的概念。
并行，是指在多核CPU架构下，同一时刻同时可以执行多个线程的能力。
在单核CPU架构中，同一时刻只能运行一个线程。
在4核4线程的CPU架构中，同一时刻可以运行4个线程，那这4个线程就是并行执行的。
并发，是指在同一时刻CPU能够处理的任务数量，也可以理解成CPU的并发能力。
在单核CPU架构中，操作系统通过CPU时间片机制提升CPU的并发能力。
在多核CPU架构中，基于任务的并行执行能力以及CPU时间片切换的能力来提升CPU的并发能力。
所以，总的来说，并发是一个宏观概念，它指的是CPU能够承载的压力大小，并行是一个微观概念，它描述CPU同时执行多个任务的能力。
~~~~

###  Mysql中MyISAM和InnoDB引擎有什么区别？

MyISAM和InnoDB都是Mysql里面的两个存储引擎。

在Mysql里面，存储引擎是可以自己扩展的，它的本质其实是定义数据存储的方式以及数据读取的实现逻辑。

而不同存储引擎本身的特性，使得我们可以针对性的选择合适的引擎来实现不同的业务场景。

从而获得更好的性能。

在Mysql 5.5之前，默认的存储引擎是MyISAM，从5.5以后，InnoDB就作为了默认的存储引擎。

在实际应用开发中，我们基本上都是采用InnoDB引擎。

我们先来看一下MyISAM引擎。

MyISAM引擎的数据是通过二进制的方式存储在磁盘上，它在磁盘上体现为两个文件

- 一个是.MYD文件，D代表Data，是MyISAM的数据文件，存放数据记录，
- 一个是.MYI文件，I代表Index，是MyISAM的索引文件，存放索引

实现机制如图所示。

因为索引和数据是分离的，所以在进行查找的时候，先从索引文件中找到数据的磁盘位置，再到数据文件中找到索引对应的数据内容。

![img](https://p3-sign.toutiaoimg.com/tos-cn-i-qvj2lq49k0/072c1c0ac5d24017badb442c9af2e63c~noop.image?_iz=58558&from=article.pc_detail&x-expires=1665039743&x-signature=E%2Bn6aDxuVfEhKqw5O3qLB7xaPFM%3D)



在InnoDB存储引擎中，数据同样存储在磁盘上，它在磁盘上只有一个ibd文件，里面包含索引和数据。

它的整体结构如图所示，在B+树的叶子节点里面存储了索引对应的数据，在通过索引进行检索的时候，命中叶子节点，就可以直接从叶子节点中取出行数据。

![img](https://p3-sign.toutiaoimg.com/tos-cn-i-qvj2lq49k0/65d6309b7a14472293a5c2dba4d4f360~noop.image?_iz=58558&from=article.pc_detail&x-expires=1665039743&x-signature=M8rRDJgwSn%2FPgKrrrILYbgs6vFU%3D)



了解了这两个存储引擎以后，我们在面试的时候该怎么回答呢？

~~~~
基于我的理解，我认为MyISAm和InnoDB的区别有4个，

- 第一个，数据存储的方式不同，MyISAM中的数据和索引是分开存储的，而InnoDB是把索引和数据存储在同一个文件里面。
- 第二个，对于事务的支持不同，MyISAM不支持事务，而InnoDB支持ACID特性的事务处理
- 第三个，对于锁的支持不同，MyISAM只支持表锁，而InnoDB可以根据不同的情况，支持行锁，表锁，间隙锁，临键锁
- 第四个，MyISAM不支持外键，InnoDB支持外键

因此基于这些特性，我们在实际应用中，可以根据不同的场景来选择合适的存储引擎。
比如如果需要支持事务，那必须要选择InnoDB。
如果大部分的表操作都是查询，可以选择MyISAM。
~~~~

资料来源:[Mysql中MyISAM和InnoDB引擎有什么区别？](https://www.toutiao.com/article/7147518399751701022/)

### Java中的单例模式如何实现

在Java里面，至少有6种方法来实现单例。

第一种，是最简单的实现，通过延迟加载的方式进行实例化，并且增加了同步锁机制避免多线程环境下的线程安全问题。

![img](https://p3-sign.toutiaoimg.com/tos-cn-i-qvj2lq49k0/59bf727a64114fe7a8e2c8a87bed9bac~noop.image?_iz=58558&from=article.pc_detail&x-expires=1665042174&x-signature=DzaRnccjGWsXiPS%2F5sIE9rmYs3A%3D)

但是这种加锁会造成性能问题，而且同步锁只有在第一次实例化的时候才产生作用，后续不需要。

于是有了第二种改进方案，通过双重检查锁的方式，减少了锁的范围来提升性能

![img](https://p3-sign.toutiaoimg.com/tos-cn-i-qvj2lq49k0/379ac217f9c149b5b4617c2249ffa620~noop.image?_iz=58558&from=article.pc_detail&x-expires=1665042174&x-signature=vIwNzUud05luigoVu4zUYJ%2BqKhU%3D)

第三种，通过饿汉式实现单例。

这种方式在类加载的时候就触发了实例化，从而避免了多线程同步问题。

![img](https://p3-sign.toutiaoimg.com/tos-cn-i-qvj2lq49k0/50d76a680eae4a30baf4c359913f6e71~noop.image?_iz=58558&from=article.pc_detail&x-expires=1665042174&x-signature=9kxCI7L7wQ2xRkVbqApI9gbfoh0%3D)