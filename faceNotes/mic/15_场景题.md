

### 说说你对一致性Hash算法的理解

资料来源：[说说你对一致性Hash算法的理解](https://www.toutiao.com/video/7107801038064878111/)

一致性 hash， 是一种比较特殊的 hash 算法， 它的核心思想是解决在分布式环境下，hash 表中可能存在的动态扩容和缩容的问题。<br/>
一般情况下， 我们会使用 hash 表的方式以 key-value 的方式来存储数据， 但是当数据量比较大的时候， 我们就会把数据存储到多个节点上， 然后通过 hash 取模的方法来决定当前 key 存储到哪个节点上。<br/>

![image-20221008134900082](img/image-20221008134900082.png ':size=40%')<br/>
这种方式有一个非常明显的问题， 就是当存储节点增加或者减少的时候， 原本的映射关系就会发生变化。<br/>
也就是需要对所有数据按照新的节点数量重新映射一遍， 这个涉及到大量的数据迁移和重新映射， 迁移代价很大。<br/>
而一致性 hash 就是用来优化这种动态变化场景的算法， 它的具体工作原理也很简单。<br/>
首先， 一致性 Hash 是通过一个 Hash 环的数据结构来实现的， 这个环的起点是0， 终点是 2^32-1。<br/>
也就是这个环的数据分布范围是[0,2^32-1]。<br/>

![image-20231228161526309](img/image-20231228161526309.png)

（如图）然后我们把存储节点的 ip 地址作为 key 进行 hash 之后，会在 Hash 环上确定一个位置。  

![image-20231228161602908](img/image-20231228161602908.png)

接下来，（如图）就是把需要存储的目标 key 使用 hash 算法计算后得到一个 hash 值，同样也会落到 hash 环的某个位置上。
然后这个目标 key 会按照顺时针的方向找到离自己最近的一个节点进行数据存储。  

![image-20231228161638791](img/image-20231228161638791.png)

> 为什么一致性 Hash 比普通 hash 算法好（字幕提示）

假设现在需要新增一个节点（如图）node4，那数据的映射关系的影响范围只限于node3和 node1， 只有少部分的数据需要重新映射迁移就行了。  

![image-20231228161730018](img/image-20231228161730018.png)

如果是已经存在的节点 node1 因为故障下线了（如图），只那只需要把原本分配在node1 上的数据重新分配到 node2 上就行了。
同样对数据影响的范围非常小。  

![image-20231228161810642](img/image-20231228161810642.png)

所以，在我看来，一致性 hash 算法的好处是扩展性很强，在增加或者减少服务器的时候，数据迁移范围比较小。<br/>
另外，在一致性 Hash 算范里面，为了避免 hash 倾斜导致数据分配不均匀的情况，我们可以使用虚拟节点的方式来解决。
以上就是我对这个问题的理解  

<hr/> 

### 阿里二面场景题，如何设计一个短链系统？

资料来源：[【Java面试】阿里二面场景题，如何设计一个短链系统？](https://www.toutiao.com/video/7298278850201551360/?from_scene=all&log_from=8ccb0cd19aa35_1703576684318)


### 如何提升接口的性能？
资料来源：[【Java面试】7年经验去高德面试翻车，如何提升接口的性能？](https://www.toutiao.com/video/7252966928783049277/?from_scene=all&log_from=f0e19dd507499_1703578331375)


### 敏感数据怎么加解密和传输？
资料来源：[【Java面试】蚂蚁金服一面真题，敏感数据怎么加解密和传输？](https://www.toutiao.com/video/7252617120113132066/?from_scene=all&log_from=0b79ba1ea15d2_1703578398079)

### 服务网格是微服务架构的更进一步升级，什么是服务网格？

[服务网格是微服务架构的更进一步升级，什么是服务网格？](https://www.toutiao.com/video/7080089211843543565/?from_scene=all)


### 秀！这么回答面试官都听不懂！什么是链路追踪？
资料来源：[【Java面试】秀！这么回答面试官都听不懂！什么是链路追踪？](https://www.toutiao.com/video/7132353330067702302/)


###  传统行业想转行互联网这道题你必须会，序列化和反序列化的理解?
资料来源：[传统行业想转行互联网这道题你必须会，序列化和反序列化的理解?](https://www.toutiao.com/video/7101201621866152462/?from_scene=all)

## ES

###  谈谈你对ES的理解，看看普通人和高手的区别在哪里？
资料来源：[谈谈你对ES的理解，看看普通人和高手的区别在哪里？](https://www.toutiao.com/video/7032236828220457509/)